import{a7 as A,a4 as h,a5 as B,e as L,aa as u,q as m,G as g,v as o,x as a,Q as M,ab as Q,y as v,a9 as H,a8 as n,H as V,P as k,t as _}from"./index-d19cf51d.js";import{a as W,b as N,E as S}from"./el-table-column-275684a4.js";import{a as j,b as z,E as G}from"./el-input-945ba833.js";import{a as O,E as P}from"./el-select-904eb826.js";import{d as E}from"./dayjs.min-7f98da47.js";import{E as r}from"./index-306eeaa4.js";import{c as J}from"./cloneDeep-956b7e5e.js";import"./validator-af3f0aef.js";const K=A(),R=K.token,c={Authorization:"Bearer "+R},X=e=>h.request({url:"api/survey-assembly/add",method:"post",headers:c,data:e}),Z=e=>h.request({url:"api/survey-assembly/all",method:"get",headers:c,params:e}),x=e=>h.request({url:"api/survey-assembly/delete/"+e.id,method:"get",headers:c}),ee=e=>h.request({url:"api/survey-assembly/edit",method:"post",headers:c,data:e}),le=e=>h.request({url:"api/survey-assembly/one/"+e}),p={add:X,all:Z,remove:x,update:ee,one:le},oe=L({data(){return{options:[{value:"5,118,7,8",label:"5,118,7,8"},{value:"1,2,3,117,4",label:"1,2,3,117,4"},{value:"9,11,16,32,89,63",label:"9,11,16,32,89,63"},{value:"4,6,12,33,34,65,70",label:"4,6,12,33,34,65,70"},{value:"22,31,30,27,24,23",label:"22,31,30,27,24,23"},{value:"40,46,55,56,64",label:"40,46,55,56,64"},{value:"39,41,46,58,60,72",label:"39,41,46,58,60,72"},{value:"101,104,109,187,210",label:"101,104,109,187,210"},{value:"77,79,83,88,89,91,99",label:"77,79,83,88,89,91,99"}],option:[{value:"发布",label:"发布"},{value:"未发布",label:"未发布"}],list:[],school:{createTime:"",id:0,name:"",password:"",published:"",surveyQuestonIds:"",updateTime:"",userId:0},dialogFormVisible:!1}},mounted(){this.showData()},methods:{showData(){p.all().then(e=>{console.log(e.data.surveyAssemblys),this.list=e.data.surveyAssemblys,this.list.forEach(l=>{l.createTime=E(l.createTime).format("YYYY-MM-DD HH:mm:ss"),l.updateTime=E(l.createTime).format("YYYY-MM-DD HH:mm:ss"),console.log(l.createTime)})})},rein(){location.reload()},toDelete(e){console.log(e);const l={id:e};p.remove(l).then(b=>{if(b.success)this.showData();else return console.log(b.msg),!1}).catch(b=>{})},search(e){p.one(e).then(l=>{console.log(l),this.list=[],this.list.push(l.data.surveyAssembly),console.log(this.list)}).catch(l=>{console.log(l),r("未找到该学生")})},toEdit(e){console.log(e),this.dialogFormVisible=!0,this.school=J(e)},toAdd(){this.school={createTime:"",id:0,name:"",password:"",published:"",surveyQuestonIds:"",updateTime:"",userId:0},this.dialogFormVisible=!0},save(){this.school.id==0?p.add(this.school).then(e=>{if(e.success)this.dialogFormVisible=!1,this.showData(),r(e.msg);else return r(e.msg),!1}).catch(e=>{r("网络错误联系管理员")}):p.update(this.school).then(e=>{if(e.success)this.dialogFormVisible=!1,this.showData(),r(e.msg);else return r(e.msg),!1}).catch(e=>{r("网络错误联系管理员")})}}}),te={class:"table"},ae={class:"dialog-footer"};function se(e,l,b,ie,ne,re){const T=u("refresh"),i=H,C=u("circle-plus"),D=u("search"),s=S,F=u("edit"),I=u("delete"),$=W,f=j,d=z,y=P,w=O,U=G,Y=N;return m(),g("div",null,[o(i,{onClick:e.rein},{default:a(()=>[o(T,{style:{width:"1em",height:"1em","margin-right":"8px"}}),n("刷新 ")]),_:1},8,["onClick"]),o(i,{style:{float:"right","margin-left":"50px"},onClick:e.toAdd},{default:a(()=>[o(C,{style:{width:"1em",height:"1em","margin-right":"8px"}}),n("添加")]),_:1},8,["onClick"]),M(v("input",{type:"text","onUpdate:modelValue":l[0]||(l[0]=t=>e.keyword=t),style:{width:"500px","margin-left":"50px"},placeholder:"输入id搜索"},null,512),[[Q,e.keyword]]),o(i,{onClick:l[1]||(l[1]=t=>e.search(e.keyword)),style:{width:"4em",height:"2em","margin-right":"10px"}},{default:a(()=>[o(D,{style:{width:"1em",height:"1em","margin-right":"8px"}}),n("搜索 ")]),_:1}),v("div",te,[o($,{data:e.list},{default:a(()=>[o(s,{prop:"id",label:"id",align:"center"}),o(s,{prop:"name",label:"组卷名字",width:"150px",align:"center"}),o(s,{prop:"password",label:"组卷密码",align:"center"}),o(s,{prop:"published",label:"发布|未发布",align:"center",width:"120px"}),o(s,{prop:"surveyQuestonIds",label:"问卷题",align:"center"}),o(s,{prop:"createTime",label:"创建时间","show-overflow-tooltip":"",align:"center",width:"200px"}),o(s,{prop:"updateTime",label:"更新时间",align:"center",width:"200px"}),o(s,{fixed:"right",label:"操作",width:"200"},{default:a(t=>[o(i,{onClick:q=>e.toEdit(t.row),type:"primary"},{default:a(()=>[o(F,{style:{width:"1em",height:"1em","margin-right":"8px"}}),n("修改 ")]),_:2},1032,["onClick"]),o(i,{onClick:q=>e.toDelete(t.row.id),type:"danger"},{default:a(()=>[o(I,{style:{width:"1em",height:"1em","margin-right":"8px"}}),n("删除 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),o(Y,{modelValue:e.dialogFormVisible,"onUpdate:modelValue":l[9]||(l[9]=t=>e.dialogFormVisible=t),title:"调查项编辑"},{footer:a(()=>[v("span",ae,[o(i,{onClick:l[7]||(l[7]=t=>e.dialogFormVisible=!1)},{default:a(()=>[n("取消")]),_:1}),o(i,{type:"primary",onClick:l[8]||(l[8]=t=>e.save())},{default:a(()=>[n(" 确定 ")]),_:1})])]),default:a(()=>[o(U,{model:e.school},{default:a(()=>[o(d,{label:"组卷名称","label-width":e.formLabelWidth},{default:a(()=>[o(f,{modelValue:e.school.name,"onUpdate:modelValue":l[2]||(l[2]=t=>e.school.name=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),o(d,{label:"组卷密码","label-width":e.formLabelWidth},{default:a(()=>[o(f,{modelValue:e.school.password,"onUpdate:modelValue":l[3]||(l[3]=t=>e.school.password=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),o(d,{label:"发布|未发布","label-width":e.formLabelWidth},{default:a(()=>[o(w,{modelValue:e.school.published,"onUpdate:modelValue":l[4]||(l[4]=t=>e.school.published=t),placeholder:"发布|未发布"},{default:a(()=>[(m(!0),g(V,null,k(e.option,t=>(m(),_(y,{key:t.value,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label-width"]),o(d,{label:"问卷题","label-width":e.formLabelWidth},{default:a(()=>[o(w,{modelValue:e.school.surveyQuestonIds,"onUpdate:modelValue":l[5]||(l[5]=t=>e.school.surveyQuestonIds=t),placeholder:"请选择问卷项"},{default:a(()=>[(m(!0),g(V,null,k(e.options,t=>(m(),_(y,{key:t.value,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label-width"]),o(d,{label:"更新时间","label-width":e.formLabelWidth},{default:a(()=>[o(f,{modelValue:e.school.updateTime,"onUpdate:modelValue":l[6]||(l[6]=t=>e.school.updateTime=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"])])}const ge=B(oe,[["render",se]]);export{ge as default};
