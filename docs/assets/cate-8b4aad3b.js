import{a7 as $,a4 as m,a5 as q,e as B,aa as r,q as p,G as f,v as t,x as a,Q as T,ab as U,y as g,a9 as A,a8 as i,H as S,P as I,t as L}from"./index-d19cf51d.js";import{a as M,b as x,E as z}from"./el-table-column-275684a4.js";import{b as G,E as H}from"./el-input-945ba833.js";import{a as O,E as P}from"./el-select-904eb826.js";import{E as n}from"./index-306eeaa4.js";import{c as Q}from"./cloneDeep-956b7e5e.js";import"./validator-af3f0aef.js";const W=$(),j=W.token,u={Authorization:"Bearer "+j},J=e=>m.request({url:"api/survey-cate/add",method:"post",headers:u,data:e}),K=e=>m.request({url:"api/survey-cate/all",method:"get",headers:u,params:e}),R=e=>m.request({url:"api/survey-cate/delete/"+e.id,method:"get",headers:u}),X=e=>m.request({url:"api/survey-cate/edit",method:"post",headers:u,data:e}),Y=e=>m.request({url:"api/survey-cate/one/"+e}),d={add:J,all:K,remove:R,update:X,one:Y},Z=B({data(){return{options:[{value:"判断题",label:"判断题"},{value:"单选题",label:"单选题"},{value:"多选题",label:"多选题"},{value:"简答题",label:"简答题"}],list:[],school:{cateName:"",id:0},dialogFormVisible:!1}},mounted(){this.showData()},methods:{showData(){d.all().then(e=>{console.log(e.data.surveyCates),this.list=e.data.surveyCates})},rein(){location.reload()},onInputNumber(){this.search=this.search.replace(/[^0-9]/g,"")},toDelete(e){console.log(e);const o={id:e};d.remove(o).then(c=>{if(c.success)this.showData();else return console.log(c.msg),!1}).catch(c=>{})},search(e){d.one(e).then(o=>{console.log(o),this.list=[],this.list.push(o.data.surveyCate),console.log(this.list)}).catch(o=>{console.log(o),n("未找到该学生")})},toEdit(e){console.log(e),this.dialogFormVisible=!0,this.school=Q(e)},toAdd(){this.school={cateName:"",id:0},this.dialogFormVisible=!0},save(){this.school.id==0?d.add(this.school).then(e=>{if(e.success)this.dialogFormVisible=!1,this.showData(),n(e.msg);else return n(e.msg),!1}).catch(e=>{n("网络错误联系管理员")}):d.update(this.school).then(e=>{if(e.success)this.dialogFormVisible=!1,this.showData(),n(e.msg);else return n(e.msg),!1}).catch(e=>{n("网络错误联系管理员")})}}}),ee={class:"table"},te={class:"dialog-footer"};function oe(e,o,c,le,ae,se){const b=r("refresh"),s=A,_=r("circle-plus"),v=r("search"),h=z,y=r("edit"),w=r("delete"),k=M,C=P,V=O,E=G,F=H,D=x;return p(),f("div",null,[t(s,{onClick:e.rein},{default:a(()=>[t(b,{style:{width:"1em",height:"1em","margin-right":"8px"}}),i("刷新 ")]),_:1},8,["onClick"]),t(s,{style:{float:"right","margin-left":"50px"},onClick:e.toAdd},{default:a(()=>[t(_,{style:{width:"1em",height:"1em","margin-right":"8px"}}),i("添加")]),_:1},8,["onClick"]),T(g("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=l=>e.keyword=l),style:{width:"500px","margin-left":"50px"},placeholder:"输入id搜索"},null,512),[[U,e.keyword]]),t(s,{onClick:o[1]||(o[1]=l=>e.search(e.keyword)),style:{width:"4em",height:"2em","margin-right":"10px"}},{default:a(()=>[t(v,{style:{width:"1em",height:"1em","margin-right":"8px"}}),i("搜索 ")]),_:1}),g("div",ee,[t(k,{data:e.list},{default:a(()=>[t(h,{fixed:"",prop:"id",label:"id",align:"center"}),t(h,{prop:"cateName",label:"分类名称",align:"center"}),t(h,{fixed:"right",label:"操作",width:"200"},{default:a(l=>[t(s,{onClick:N=>e.toEdit(l.row),type:"primary"},{default:a(()=>[t(y,{style:{width:"1em",height:"1em","margin-right":"8px"}}),i("修改 ")]),_:2},1032,["onClick"]),t(s,{onClick:N=>e.toDelete(l.row.id),type:"danger"},{default:a(()=>[t(w,{style:{width:"1em",height:"1em","margin-right":"8px"}}),i("删除 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),t(D,{modelValue:e.dialogFormVisible,"onUpdate:modelValue":o[5]||(o[5]=l=>e.dialogFormVisible=l),title:"调查问卷类型"},{footer:a(()=>[g("span",te,[t(s,{onClick:o[3]||(o[3]=l=>e.dialogFormVisible=!1)},{default:a(()=>[i("取消")]),_:1}),t(s,{type:"primary",onClick:o[4]||(o[4]=l=>e.save())},{default:a(()=>[i(" 确定 ")]),_:1})])]),default:a(()=>[t(F,{model:e.school},{default:a(()=>[t(E,{label:"分类名称","label-width":e.formLabelWidth},{default:a(()=>[t(V,{modelValue:e.school.cateName,"onUpdate:modelValue":o[2]||(o[2]=l=>e.school.cateName=l),placeholder:"请选择题型"},{default:a(()=>[(p(!0),f(S,null,I(e.options,l=>(p(),L(C,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"])])}const he=q(Z,[["render",oe]]);export{he as default};
