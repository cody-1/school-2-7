import{a7 as D,a4 as m,a5 as F,e as I,aa as r,q as $,G as q,v as t,x as l,Q as B,ab as U,y as c,a9 as T,a8 as i}from"./index-d19cf51d.js";import{a as A,b as N,E as L}from"./el-table-column-275684a4.js";import{a as M,b as S,E as W}from"./el-input-945ba833.js";import{E as n}from"./index-306eeaa4.js";import{c as z}from"./cloneDeep-956b7e5e.js";const G=D(),Q=G.token,p={Authorization:"Bearer "+Q},j=e=>m.request({url:"api/survey-item/add",method:"post",headers:p,data:e}),H=e=>m.request({url:"api/survey-item/all",method:"get",headers:p,params:e}),J=e=>m.request({url:"api/survey-item/delete/"+e.id,method:"get",headers:p}),K=e=>m.request({url:"api/survey-item/edit",method:"post",headers:p,data:e}),O=e=>m.request({url:"api/survey-item/one/"+e}),d={add:j,all:H,remove:J,update:K,one:O},P=I({data(){return{list:[],school:{id:0,item:"",userId:0},dialogFormVisible:!1}},mounted(){this.showData()},methods:{showData(){d.all().then(e=>{console.log(e.data.surveyItems),this.list=e.data.surveyItems})},rein(){location.reload()},toDelete(e){console.log(e);const o={id:e};d.remove(o).then(u=>{if(u.success)this.showData();else return console.log(u.msg),!1}).catch(u=>{})},search(e){d.one(e).then(o=>{console.log(o),this.list=[],this.list.push(o.data.surveyItem),console.log(this.list)}).catch(o=>{console.log(o),n("未找到该学生")})},toEdit(e){console.log(e),this.dialogFormVisible=!0,this.school=z(e)},toAdd(){this.school={id:0,item:"",userId:0},this.dialogFormVisible=!0},save(){this.school.id==0?d.add(this.school).then(e=>{if(e.success)this.dialogFormVisible=!1,this.showData(),n(e.msg);else return n(e.msg),!1}).catch(e=>{n("网络错误联系管理员")}):d.update(this.school).then(e=>{if(e.success)this.dialogFormVisible=!1,this.showData(),n(e.msg);else return n(e.msg),!1}).catch(e=>{n("网络错误联系管理员")})}}}),R={class:"table"},X={class:"dialog-footer"};function Y(e,o,u,Z,x,ee){const b=r("refresh"),a=T,y=r("circle-plus"),_=r("search"),h=L,w=r("edit"),v=r("delete"),V=A,f=M,g=S,k=W,C=N;return $(),q("div",null,[t(a,{onClick:e.rein},{default:l(()=>[t(b,{style:{width:"1em",height:"1em","margin-right":"8px"}}),i("刷新 ")]),_:1},8,["onClick"]),t(a,{style:{float:"right","margin-left":"50px"},onClick:e.toAdd},{default:l(()=>[t(y,{style:{width:"1em",height:"1em","margin-right":"8px"}}),i("添加")]),_:1},8,["onClick"]),B(c("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=s=>e.keyword=s),style:{width:"500px","margin-left":"50px"},placeholder:"输入id搜索"},null,512),[[U,e.keyword]]),t(a,{onClick:o[1]||(o[1]=s=>e.search(e.keyword)),style:{width:"4em",height:"2em","margin-right":"10px"}},{default:l(()=>[t(_,{style:{width:"1em",height:"1em","margin-right":"8px"}}),i("搜索 ")]),_:1}),c("div",R,[t(V,{data:e.list},{default:l(()=>[t(h,{fixed:"",prop:"id",label:"id",align:"center"}),t(h,{prop:"item",label:"调查项",align:"center"}),t(h,{prop:"userId",label:"用户编号",align:"center"}),t(h,{fixed:"right",label:"操作",width:"200"},{default:l(s=>[t(a,{onClick:E=>e.toEdit(s.row),type:"primary"},{default:l(()=>[t(w,{style:{width:"1em",height:"1em","margin-right":"8px"}}),i("修改 ")]),_:2},1032,["onClick"]),t(a,{onClick:E=>e.toDelete(s.row.id),type:"danger"},{default:l(()=>[t(v,{style:{width:"1em",height:"1em","margin-right":"8px"}}),i("删除 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),t(C,{modelValue:e.dialogFormVisible,"onUpdate:modelValue":o[6]||(o[6]=s=>e.dialogFormVisible=s),title:"调查项编辑"},{footer:l(()=>[c("span",X,[t(a,{onClick:o[4]||(o[4]=s=>e.dialogFormVisible=!1)},{default:l(()=>[i("取消")]),_:1}),t(a,{type:"primary",onClick:o[5]||(o[5]=s=>e.save())},{default:l(()=>[i(" 确定 ")]),_:1})])]),default:l(()=>[t(k,{model:e.school},{default:l(()=>[t(g,{label:"调查项","label-width":e.formLabelWidth},{default:l(()=>[t(f,{modelValue:e.school.item,"onUpdate:modelValue":o[2]||(o[2]=s=>e.school.item=s),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),t(g,{label:"用户编号","label-width":e.formLabelWidth},{default:l(()=>[t(f,{modelValue:e.school.userId,"onUpdate:modelValue":o[3]||(o[3]=s=>e.school.userId=s),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"])])}const ie=F(P,[["render",Y]]);export{ie as default};
