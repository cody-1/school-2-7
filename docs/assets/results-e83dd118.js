import{a7 as D,a4 as u,a5 as I,e as T,aa as m,q,G as F,v as t,x as s,Q as L,ab as $,y as g,a9 as U,a8 as i}from"./index-d19cf51d.js";import{a as B,b as M,E as W}from"./el-table-column-275684a4.js";import{a as Y,b as A,E as N}from"./el-input-945ba833.js";import{d as R}from"./dayjs.min-7f98da47.js";import{E as r}from"./index-306eeaa4.js";import{c as H}from"./cloneDeep-956b7e5e.js";const S=D(),j=S.token,f={Authorization:"Bearer "+j},z=e=>u.request({url:"api/survey-results/add",method:"post",headers:f,data:e}),G=e=>u.request({url:"api/survey-results/all",method:"get",headers:f,params:e}),Q=e=>u.request({url:"api/survey-results/delete/"+e.id,method:"get",headers:f}),J=e=>u.request({url:"api/survey-results/edit",method:"post",headers:f,data:e}),K=e=>u.request({url:"api/survey-results/one/"+e}),O=e=>u.request({url:"api/survey-question/all",method:"get",params:e}),d={add:z,all:G,remove:Q,update:J,one:K,qall:O},P=T({data(){return{list:[],school:{createTime:"",id:0,results:"",serveyListId:0,userId:0},dialogFormVisible:!1}},mounted(){this.showData()},methods:{showData(){d.all().then(e=>{console.log(e.data.surveyResults),this.list=e.data.surveyResults,this.list.forEach(l=>{l.createTime=R(l.createTime).format("YYYY-MM-DD HH:mm:ss"),console.log(l.createTime)})}),d.qall().then(e=>{console.log(e)})},rein(){location.reload()},toDelete(e){console.log(e);const l={id:e};d.remove(l).then(h=>{if(h.success)this.showData();else return console.log(h.msg),!1}).catch(h=>{})},search(e){d.one(e).then(l=>{console.log(l),this.list=[],this.list.push(l.data.surveyResult),console.log(this.list)}).catch(l=>{console.log(l),r("未找到该学生")})},toEdit(e){console.log(e),this.dialogFormVisible=!0,this.school=H(e)},toAdd(){this.school={createTime:"",id:0,results:"",serveyListId:0,userId:0},this.dialogFormVisible=!0},save(){this.school.id==0?d.add(this.school).then(e=>{if(e.success)this.dialogFormVisible=!1,this.showData(),r(e.msg);else return r(e.msg),!1}).catch(e=>{r("网络错误联系管理员")}):d.update(this.school).then(e=>{if(e.success)this.dialogFormVisible=!1,this.showData(),r(e.msg);else return r(e.msg),!1}).catch(e=>{r("网络错误联系管理员")})}}}),X={class:"table"},Z={class:"dialog-footer"};function x(e,l,h,ee,le,te){const b=m("refresh"),a=U,y=m("circle-plus"),v=m("search"),n=W,w=m("edit"),V=m("delete"),k=B,p=Y,c=A,_=N,C=M;return q(),F("div",null,[t(a,{onClick:e.rein},{default:s(()=>[t(b,{style:{width:"1em",height:"1em","margin-right":"8px"}}),i("刷新 ")]),_:1},8,["onClick"]),t(a,{style:{float:"right","margin-left":"50px"},onClick:e.toAdd},{default:s(()=>[t(y,{style:{width:"1em",height:"1em","margin-right":"8px"}}),i("添加")]),_:1},8,["onClick"]),L(g("input",{type:"text","onUpdate:modelValue":l[0]||(l[0]=o=>e.keyword=o),style:{width:"500px","margin-left":"50px"},placeholder:"输入id搜索"},null,512),[[$,e.keyword]]),t(a,{onClick:l[1]||(l[1]=o=>e.search(e.keyword)),style:{width:"4em",height:"2em","margin-right":"10px"}},{default:s(()=>[t(v,{style:{width:"1em",height:"1em","margin-right":"8px"}}),i("搜索 ")]),_:1}),g("div",X,[t(k,{data:e.list},{default:s(()=>[t(n,{fixed:"",prop:"id",label:"id",align:"center"}),t(n,{prop:"serveyListId",label:"组卷ID",align:"center"}),t(n,{prop:"userId",label:"用户编号",align:"center"}),t(n,{prop:"createTime",label:"创建时间",align:"center"}),t(n,{prop:"results",label:"试题结果",align:"center"}),t(n,{fixed:"right",label:"操作",width:"200"},{default:s(o=>[t(a,{onClick:E=>e.toEdit(o.row),type:"primary"},{default:s(()=>[t(w,{style:{width:"1em",height:"1em","margin-right":"8px"}}),i("修改 ")]),_:2},1032,["onClick"]),t(a,{onClick:E=>e.toDelete(o.row.id),type:"danger"},{default:s(()=>[t(V,{style:{width:"1em",height:"1em","margin-right":"8px"}}),i("删除 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),t(C,{modelValue:e.dialogFormVisible,"onUpdate:modelValue":l[8]||(l[8]=o=>e.dialogFormVisible=o),title:"编辑"},{footer:s(()=>[g("span",Z,[t(a,{onClick:l[6]||(l[6]=o=>e.dialogFormVisible=!1)},{default:s(()=>[i("取消")]),_:1}),t(a,{type:"primary",onClick:l[7]||(l[7]=o=>e.save())},{default:s(()=>[i(" 确定 ")]),_:1})])]),default:s(()=>[t(_,{model:e.school},{default:s(()=>[t(c,{label:"组卷ID","label-width":e.formLabelWidth},{default:s(()=>[t(p,{modelValue:e.school.serveyListId,"onUpdate:modelValue":l[2]||(l[2]=o=>e.school.serveyListId=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),t(c,{label:"用户编号","label-width":e.formLabelWidth},{default:s(()=>[t(p,{modelValue:e.school.userId,"onUpdate:modelValue":l[3]||(l[3]=o=>e.school.userId=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),t(c,{label:"创建时间","label-width":e.formLabelWidth},{default:s(()=>[t(p,{modelValue:e.school.createTime,"onUpdate:modelValue":l[4]||(l[4]=o=>e.school.createTime=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),t(c,{label:"试题结果","label-width":e.formLabelWidth},{default:s(()=>[t(p,{modelValue:e.school.results,"onUpdate:modelValue":l[5]||(l[5]=o=>e.school.results=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"])])}const de=I(P,[["render",x]]);export{de as default};
