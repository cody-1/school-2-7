import{a7 as U,a4 as m,a5 as q,e as B,aa as c,q as F,G as T,v as l,x as a,Q as $,ab as D,y as f,a9 as L,a8 as h}from"./index-d19cf51d.js";import{a as N,b as W,E as M}from"./el-table-column-275684a4.js";import{a as S,b as A,E as I}from"./el-input-945ba833.js";import{E as z}from"./index-48859d37.js";import{E as r}from"./index-306eeaa4.js";import"./validator-af3f0aef.js";const G=U(),Q=G.token,b={Authorization:"Bearer "+Q},R=e=>m.request({url:"api/school/add",method:"post",headers:b,data:e}),j=e=>m.request({url:"api/school/all",method:"get",headers:b,params:e}),H=e=>m.request({url:"api/school/checkname",method:"get",params:e}),J=e=>m.request({url:"api/school/colums",method:"get",params:e}),K=e=>m.request({url:"api/school/delete",method:"get",params:e}),O=e=>m.request({url:"api/school/edit",method:"post",data:e}),P=e=>m.request({url:"api/school/enable",method:"get",params:e}),X=e=>m.request({url:"api/school/one",method:"get",params:e}),Y=e=>m.request({url:"api/school/search",method:"post",data:e}),p={add:R,all:j,checkName:H,getCommunitiesByColums:J,remove:K,update:O,query:P,one:X,getSchoolsByRegion:Y};const Z=B({data(){return{list:[],school:{address:"",area:"",city:"",createTime:"",deleted:0,description:"",enable:0,id:0,latitude:"",longitude:"",province:"",schoolName:"",updateTime:""},dialogFormVisible:!1}},mounted(){this.showData()},methods:{showData(){p.all().then(e=>{console.log(e.data.schools),this.list=e.data.schools})},rein(){location.reload()},handleDelete(e){const o={id:e};z.confirm("您是否需要删除该学校?","提示",{confirmButtonText:"是",cancelButtonText:"否",type:"warning"}).then(()=>{p.remove(o).then(i=>{i.success?(r({type:"success",message:"删除成功"}),this.showData()):r({type:"error",message:"网络出问题，联系管理员"})})}).catch(()=>{r({type:"warning",message:"取消删除"})})},search(e){const o={id:e};p.one(o).then(i=>{console.log(i),this.list=[],this.list.push(i.data.school),console.log(this.list)}).catch(i=>{console.log(i),r("未找到该学生")})},handleEdit(e){this.dialogFormVisible=!0;const o={id:e};p.one(o).then(i=>{this.school=i.data.school})},toAdd(){this.school={address:"",area:"",city:"",createTime:"",deleted:0,description:"",enable:0,id:0,latitude:"",longitude:"",province:"",schoolName:"",updateTime:""},this.dialogFormVisible=!0},confirm(){this.school.id==0?p.add(this.school).then(e=>{if(e.success)this.dialogFormVisible=!1,this.showData(),r(e.msg);else return r(e.msg),!1}).catch(e=>{r("网络错误联系管理员")}):(p.update(this.school).then(e=>{e.success?(r({type:"success",message:"编辑成功"}),this.showData()):r({type:"error",message:"网络出问题，联系管理员"})}),this.dialogFormVisible=!1)}}}),_={class:"table"},x={class:"dialog-footer"};function ee(e,o,i,le,oe,te){const g=c("refresh"),u=L,w=c("search"),s=M,V=c("edit"),y=c("delete"),k=N,d=S,n=A,v=I,E=W;return F(),T("div",null,[l(u,{onClick:e.rein},{default:a(()=>[l(g,{style:{width:"1em",height:"1em","margin-right":"8px"}}),h("刷新 ")]),_:1},8,["onClick"]),$(f("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=t=>e.keyword=t),style:{width:"500px","margin-left":"50px"},placeholder:"输入id搜索"},null,512),[[D,e.keyword]]),l(u,{onClick:o[1]||(o[1]=t=>e.search(e.keyword)),style:{width:"4em",height:"2em","margin-right":"10px"}},{default:a(()=>[l(w,{style:{width:"1em",height:"1em","margin-right":"8px"}}),h("搜索 ")]),_:1}),f("div",_,[l(k,{data:e.list},{default:a(()=>[l(s,{fixed:"",prop:"id",label:"id",align:"center"}),l(s,{prop:"province",label:"省份",width:"80",align:"center"}),l(s,{prop:"city",label:"城市",width:"80",align:"center"}),l(s,{prop:"area",label:"市|县",width:"80",align:"center"}),l(s,{prop:"schoolName",label:"学校名称",width:"170",align:"center"}),l(s,{prop:"latitude",label:"纬度",width:"100",align:"center"}),l(s,{prop:"longitude",label:"经度",width:"100",align:"center"}),l(s,{prop:"enable",label:"是否启用",width:"80",align:"center"}),l(s,{prop:"description",label:"学校说明",width:"80",align:"center"}),l(s,{prop:"address",label:"地址",width:"250",align:"center"}),l(s,{fixed:"right",label:"操作",width:"200"},{default:a(({row:t})=>[l(u,{onClick:C=>e.handleEdit(t.id),type:"primary"},{default:a(()=>[l(V,{style:{width:"1em",height:"1em","margin-right":"8px"}}),h("修改 ")]),_:2},1032,["onClick"]),l(u,{onClick:C=>e.handleDelete(t.id),type:"danger"},{default:a(()=>[l(y,{style:{width:"1em",height:"1em","margin-right":"8px"}}),h("删除 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),l(E,{modelValue:e.dialogFormVisible,"onUpdate:modelValue":o[13]||(o[13]=t=>e.dialogFormVisible=t),title:"学校编辑"},{footer:a(()=>[f("span",x,[l(u,{onClick:o[11]||(o[11]=t=>e.dialogFormVisible=!1)},{default:a(()=>[h("取消")]),_:1}),l(u,{type:"primary",onClick:o[12]||(o[12]=t=>e.confirm())},{default:a(()=>[h(" 确定 ")]),_:1})])]),default:a(()=>[l(v,{model:e.school},{default:a(()=>[l(n,{label:"省份","label-width":e.formLabelWidth},{default:a(()=>[l(d,{modelValue:e.school.province,"onUpdate:modelValue":o[2]||(o[2]=t=>e.school.province=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(n,{label:"城市","label-width":e.formLabelWidth},{default:a(()=>[l(d,{modelValue:e.school.city,"onUpdate:modelValue":o[3]||(o[3]=t=>e.school.city=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(n,{label:"市|县","label-width":e.formLabelWidth},{default:a(()=>[l(d,{modelValue:e.school.area,"onUpdate:modelValue":o[4]||(o[4]=t=>e.school.area=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(n,{label:"学校名称","label-width":e.formLabelWidth},{default:a(()=>[l(d,{modelValue:e.school.schoolName,"onUpdate:modelValue":o[5]||(o[5]=t=>e.school.schoolName=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(n,{label:"纬度","label-width":e.formLabelWidth},{default:a(()=>[l(d,{modelValue:e.school.latitude,"onUpdate:modelValue":o[6]||(o[6]=t=>e.school.latitude=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(n,{label:"经度","label-width":e.formLabelWidth},{default:a(()=>[l(d,{modelValue:e.school.longitude,"onUpdate:modelValue":o[7]||(o[7]=t=>e.school.longitude=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(n,{label:"是否启用","label-width":e.formLabelWidth},{default:a(()=>[l(d,{modelValue:e.school.enable,"onUpdate:modelValue":o[8]||(o[8]=t=>e.school.enable=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(n,{label:"学校说明","label-width":e.formLabelWidth},{default:a(()=>[l(d,{modelValue:e.school.description,"onUpdate:modelValue":o[9]||(o[9]=t=>e.school.description=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(n,{label:"地址","label-width":e.formLabelWidth},{default:a(()=>[l(d,{modelValue:e.school.address,"onUpdate:modelValue":o[10]||(o[10]=t=>e.school.address=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"])])}const me=q(Z,[["render",ee]]);export{me as default};
